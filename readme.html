
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TL;DR &#8212; tiempo_deshima 0.1.0 documentation</title>
    
  <link rel="stylesheet" href="_static/css/index.d431a4ee1c1efae0e38bdfebc22debff.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
  <link rel="preload" as="script" href="_static/js/index.30270b6e4c972e43c488.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="index.html">Home</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="_apidoc/tiempo_deshima.html">Package guide</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/Stefanie-B/DESHIMAmodel/" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">

<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>


<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
      
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#" class="nav-link">TL;DR</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#output-of-the-model" class="nav-link">Output of the model</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#using-the-model" class="nav-link">Using the model</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#example" class="nav-link">Example</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#atmosphere" class="nav-link">Atmosphere</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#galaxy" class="nav-link">Galaxy</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#observation" class="nav-link">Observation</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#instrument" class="nav-link">Instrument</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#miscellaneous" class="nav-link">Miscellaneous</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#important-instructions" class="nav-link">Important instructions</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#atmosphere-1" class="nav-link">Atmosphere</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#changing-the-number-of-filters-or-the-distribution-of-the-center-frequencies-of-the-filters" class="nav-link">Changing the number of filters or the distribution of the center frequencies of the filters</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#example-of-changing-the-filters" class="nav-link">Example of changing the filters</a>
        </li>
    
            </ul>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#installation" class="nav-link">Installation</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <p><a class="reference external" href="https://doi.org/10.5281/zenodo.4279085"><img alt="DOI" src="https://zenodo.org/badge/DOI/10.5281/zenodo.4279085.svg" /></a> <a class="reference external" href="LICENSE"><img alt="License" src="https://img.shields.io/badge/license-MIT-blue.svg?label=License&amp;style=flat-square" /></a></p>
<p>Time-dependent end-to-end model for post-process optimization of the DESHIMA spectrometer.</p>
<div class="section" id="tl-dr">
<h1>TL;DR<a class="headerlink" href="#tl-dr" title="Permalink to this headline">¶</a></h1>
<p>TiEMPO allows for simulating the output of the DESHIMA spectrometer. The model features simulation of an input galaxy with atomic spectral lines that is sampled with the ABBA chopnod method. The simulation includes atmospheric distrotion through distortions in the optical thickness of the atmosphere due to precipitable water vapor using outputs of the ARIS model (provided by the user), telescope transmission and finally noise and attenuation due to the MKID filterbank of DESHIMA.</p>
</div>
<div class="section" id="output-of-the-model">
<h1>Output of the model<a class="headerlink" href="#output-of-the-model" title="Permalink to this headline">¶</a></h1>
<p>The model outputs the following data: 1. Vector of the time: all moments in time at which the signal is calculated in s. 2. Matrix of the power: matrix of all the power values of the signal in W. It has dimensions [5, #filters, #timesamples]. The first dimension equals 5, as 5 pwv values are taken in each timesample. 3. Matrix of the sky temperature: matrix of the power converted to sky temperature (has the same dimensions as the matrix of the power) in K. 4. Center frequencies of the filters:
The center frequencies of the filters in the filterbank in the MKID chip in Hz.</p>
<p>The pwv values are taken in the following order:</p>
<p><img alt="pwv values" src="https://raw.githubusercontent.com/deshima-dev/tiempo_deshima/master/skychopping.png" /> 1. Left position 2. Center position with galaxy 3. Right position 4. Top position 5. Bottom position 6. Center position without galaxy The pwv values in position 2 and position 4 are equal, but otherwise the sky temperatures are computed separately.</p>
</div>
<div class="section" id="using-the-model">
<h1>Using the model<a class="headerlink" href="#using-the-model" title="Permalink to this headline">¶</a></h1>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">time_vector</span><span class="p">,</span> <span class="n">center_freq</span> <span class="o">=</span> <span class="n">tiempo_deshima</span><span class="o">.</span><span class="n">run_tiempo</span><span class="p">(</span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="s1">&#39;deshima_2&#39;</span><span class="p">,</span> <span class="n">prefix_atm_data</span> <span class="o">=</span> <span class="s1">&#39;aris200602.dat-&#39;</span><span class="p">,</span> <span class="n">sourcefolder</span> <span class="o">=</span> <span class="s1">&#39;../Data/output_ARIS&#39;</span><span class="p">,</span> <span class="n">save_name_data</span> <span class="o">=</span> <span class="s1">&#39;TiEMPO_simulation&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Inputs include:</p>
</div>
<div class="section" id="atmosphere">
<h2>Atmosphere<a class="headerlink" href="#atmosphere" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><strong>pwv_0</strong> (<em>float</em>): The value of the precipitable water vapor that is added to the dpwv from ARIS in mm. <strong>windspeed</strong> (<em>float</em>): The windspeed of the atmosphere in m/s. <strong>prefix_atm_data</strong> (<em>string</em>): The beginning of the name with which the atmosphere data is saved. For example, if the files are called <em>sample-00.dat-000</em>, <em>sample-00.dat-001</em> etc, then Prefix_atm_data must be ‘sample-00.dat-’ <strong>sourcefolder</strong> (<em>string</em>): folder in which the atmosphere data is saved (relative to cwd)
<strong>grid</strong> (<em>float</em>): The width of a grid square in the atmosphere map in m <strong>max_num_strips</strong> (<em>integer</em>): The number of atmosphere strips that are saved as ARIS output. <strong>x_length_strip</strong> (<em>int</em>): The length of one atmosphere strip in the x direction. This is the number of gridpoints, <em>not</em> the distance in meters.</div>
<div class="line"><strong>separation</strong> (<em>float</em>): Separation between two chop positions in m, assuming that the atmosphere is at 1km height. Default is 1.1326 (this corresponds to 116.8 arcsec). <strong>useDESIM</strong> (<em>bool</em>): Determines whether the simple atmospheric model is used (0) or the more sophisticated desim simulation (1). <strong>inclAtmosphere</strong> (<em>bool</em>):Determines whether the simple atmospheric model is used (0) or the more sophisticated desim simulation (1).</div>
</div>
</div>
<div class="section" id="galaxy">
<h2>Galaxy<a class="headerlink" href="#galaxy" title="Permalink to this headline">¶</a></h2>
<p><strong>luminosity</strong> (<em>float</em>): Luminosity of the galaxy, in Log(L_fir [L_sol]) <strong>redshift</strong> (<em>float</em>): The redshift of the galaxy <strong>linewidth</strong> (<em>float</em>): The linewidth, in km/s <strong>num_bins</strong> (<em>int</em>): Determines the amount of bins used in the simulation of the galaxy spectrum. <strong>galaxy_on</strong> (<em>bool</em>): Can be used to turn the galaxy in position 2 off. Default is True (galaxy is present).</p>
</div>
<div class="section" id="observation">
<h2>Observation<a class="headerlink" href="#observation" title="Permalink to this headline">¶</a></h2>
<p><strong>EL</strong> (<em>float</em>): The elevation of the telescope, in degrees <strong>EL_vec</strong> (<em>vector of floats</em>): If this parameter is set, it allows to specify the elevation of the telescope in degrees per timestep, for example in the case of tracking a target. Vector must have a length of 160Hz times obs_time. <strong>obs_time</strong> (<em>float</em>): The observation time. This parameter has to be smaller than <strong>max_obs_time</strong>, which is calculated using the windspeed and the total length of the strips of atmosphere data, in s.</p>
</div>
<div class="section" id="instrument">
<h2>Instrument<a class="headerlink" href="#instrument" title="Permalink to this headline">¶</a></h2>
<p><strong>F_min</strong> (<em>float</em>): Lowest center frequency of all the MKIDs. <strong>spec_res</strong> (<em>float</em>): Spectral resolution <strong>f_spacing</strong> (<em>float</em>): spacing between center frequencies = F/dF (mean). <strong>num_filters</strong> (<em>float</em>): Number of filters in the filterbank <strong>beam_radius</strong> (<em>float</em>): Radius of the Gaussian telescope beam in meters.</p>
</div>
<div class="section" id="miscellaneous">
<h2>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h2>
<p><strong>input_dictionary</strong> (<em>string</em>): Determines where the input values of keywords F_min thru come from: either standard values for DESHIMA, manual entry from the keywords or from a txt file <strong>dictionary_name</strong> (<em>string</em>): name of a txt file in which the values of optional keywords are saved. <strong>save_name_data</strong> (<em>string</em>): The name with which the produced data is saved. <strong>savefolder</strong> (<em>string</em>): Folder in which the produced data is saved (relative to cwd) <strong>save_P</strong> (<em>bool</em>): determines whether
power in Watts is saved <strong>save_T</strong> (<em>bool</em>): determines whether sky temperature in Kelvins is saved <strong>n_jobs</strong> (<em>int</em>): amount of threads in the threadpool <strong>n_batches</strong> (<em>int</em>): amount of batches in which the output data is divided into in time</p>
</div>
</div>
<div class="section" id="important-instructions">
<h1>Important instructions<a class="headerlink" href="#important-instructions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="atmosphere-1">
<span id="id1"></span><h2>Atmosphere<a class="headerlink" href="#atmosphere-1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>All atmosphere strips must have the same length in the x direction and a length in the y direction of at least 30 gridpoints. (‘length’ means number of gridpoints, <em>not</em> distance in meters)</p></li>
</ul>
</div>
<div class="section" id="changing-the-number-of-filters-or-the-distribution-of-the-center-frequencies-of-the-filters">
<h2>Changing the number of filters or the distribution of the center frequencies of the filters<a class="headerlink" href="#changing-the-number-of-filters-or-the-distribution-of-the-center-frequencies-of-the-filters" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>For each filter, an interpolation between the power and the sky temperature is made. This means that these interpolations need to be made and saved again if the center frequencies of the filters are changed, before TiEMPO can be run again. This can be done by using <code class="docutils literal notranslate"><span class="pre">new_filterbank()</span></code> with the desired input dictionary, which can be generated using <code class="docutils literal notranslate"><span class="pre">get_dictionary()</span></code>.</p></li>
<li><p>Since the chip properties are altered, ‘deshima_1’ and ‘deshima_2’ cannot be used as keywords for <em>input_dictionary</em> anymore.</p></li>
</ul>
<div class="section" id="example-of-changing-the-filters">
<h3>Example of changing the filters<a class="headerlink" href="#example-of-changing-the-filters" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">dict</span> <span class="o">=</span> <span class="n">tiempo_deshima</span><span class="o">.</span><span class="n">get_dictionary</span><span class="p">(</span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="s1">&#39;manual&#39;</span><span class="p">,</span> <span class="n">prefix_atm_data</span> <span class="o">=</span> <span class="s1">&#39;aris.dat-&#39;</span><span class="p">,</span> <span class="n">sourcefolder</span> <span class="o">=</span> <span class="s1">&#39;../Data/output_ARIS&#39;</span><span class="p">,</span> <span class="n">save_name_data</span> <span class="o">=</span> <span class="s1">&#39;TiEMPO_simulation_new_filters&#39;</span><span class="p">)</span>
<span class="n">tiempo_deshima</span><span class="o">.</span><span class="n">new_filterbank</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
<span class="n">time_vector</span><span class="p">,</span> <span class="n">center_freq</span> <span class="o">=</span> <span class="n">tiempo_deshima</span><span class="o">.</span><span class="n">run_tiempo</span><span class="p">(</span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="s1">&#39;manual&#39;</span><span class="p">,</span> <span class="n">prefix_atm_data</span> <span class="o">=</span> <span class="s1">&#39;aris.dat-&#39;</span><span class="p">,</span> <span class="n">sourcefolder</span> <span class="o">=</span> <span class="s1">&#39;../Data/output_ARIS&#39;</span><span class="p">,</span> <span class="n">save_name_data</span> <span class="o">=</span> <span class="s1">&#39;TiEMPO_simulation_new_filters&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">tiempo_deshima</span>
</pre></div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="_static/js/index.30270b6e4c972e43c488.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2018-2020 DESHIMA software team.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>